---
import Article from '@/components/Article.astro'
import Banner from '@/components/Banner.astro'
import Panel from '@/components/Panel.astro'
import BaseLayout from '@/layouts/BaseLayout.astro'
import { type CollectionEntry, getCollection } from 'astro:content'
import { render } from 'astro:content'

export async function getStaticPaths() {
  const posts = await getCollection('blog')
  return posts.map((post) => ({
    params: { slug: post.id },
    props: post,
  }))
}
type Props = CollectionEntry<'blog'>

const post = Astro.props
const { Content } = await render(post)
---

<BaseLayout>
  <div class="">
    <Banner title={post.data.title} subtitle={post.data.description} />
    <div class="flex flex-row justify-center gap-4 relative max-w-7xl mx-auto">
      <Panel class="w-full mx-auto">
        <Article>
          <Content />
        </Article>
      </Panel>
    </div>
  </div>
</BaseLayout>
